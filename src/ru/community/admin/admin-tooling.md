# Инструменты администрирования

Инструментарий администрирования в SS14 не слишком сложен, но некоторые вещи не помешало бы объяснить.

## Меню администрирования

![adminmenu.png](../../assets/images/admin/adminmenu.png)

---

Меню администратора открывается нажатием клавиши F7 или с помощью панели кнопок в верхней части экрана.

Вкладка *Admin* содержит полезные действия для общего использования.

Вкладка *Adminbus* позволяет управлять многими действиями, в том числе создавать сущности, плитки или декали, а также запускать/останавливать события на станции.

Вкладка *Atmos* позволяет изменять атмосферу для текущей сетки. При регулярном администрировании она не нужна.

Вкладка *Round* позволяет управлять ходом текущей смены. С помощью этого меню можно начать, закончить или перезапустить раунд. Для всего этого существуют эквивалентные команды.

Вкладка *Server* позволяет выключить/перезапустить весь сервер, а также переключить OOC/LOOC. Это доступно только администраторам с соответствующими флагами.

Вкладка *Player* позволяет просмотреть всех игроков в раунде. Здесь же можно включить **Player Overlay**, который отображает основную информацию (ckey, имя персонажа, есть ли тег antag) обо всех игроках в игре.

## Функции

### Функции администрирования

![verbs.png](../../assets/images/admin/verbs.png)

---
Существует множество функций администрирования. Все они достаточно понятны. *Message* открывает окно помощи, адресованное игроку, *Open Admin Notes* открывает заметки пользователя. *Teleport Here/To* делает то, что сказано, а *Freeze* не дает игроку двигаться или взаимодействовать, пока он не будет разморожен администратором.

### Функции отладки

![debug.png](../../assets/images/admin/debug.png)

---

Функции отладки предназначены в первую очередь для отладки, но также очень полезны для обычных администраторов.

*Control mob* дает возможность контролировать сущность, если оная разумна.

На скриншоте нет примера, *Make sentient* делает сущность контролируемой.

На скриншоте нет примера, *Make ghost role* превращает сущность в управляемую роль призрака.

*Delete* удаляет сущность.

*Edit solutions* позволяет изменять растворы и реагенты внутри сущности, например, химию в теле, содержимое мензурки и т.д.

*Rejuvenate* полностью исцеляет сущность. Используйте только в случае необходимости.

*Set outfit* позволяет изменить одежду/предметы, в которые одет объект. Полезно для проведения всяческих ивентов/событий или для возвращения людей в игру.

**View variables** - очень, очень полезный инструмент, позволяющий просмотреть все отмеченные переменные каждого компонента, имеющегося у сущности, а также изменить некоторые из них. Полезен для отладки, но также очень удобен для администрирования, так как позволяет добавлять или удалять произвольные компоненты, например `OwOAccent`. Более подробное описание использования **View variables** (VV) приведено ниже.

### Smite Verbs

![smite.png](../../assets/images/admin/smite.png)

---

Использовать в разумных пределах. Здесь показаны не все имеющиеся в наличии наказания. Все они в той или иной степени могут испортить чью-то смену.

## Admin Help

![ahelp.png](../../assets/images/admin/ahelp.png)

---

Меню **Admin Help** открывается нажатием клавиши `Esc -> Admin Help`, с помощью панели `Player Actions Panel` в меню **Admin Menu** или с помощью административного глагола `Message`.

Выберите игрока для сообщения с помощью меню слева. Значок "меч" позволяет понять, является ли игрок антагонистом. Он также показывает текущее имя персонажа и его ckey.


Кнопки *kick*, *ban*, *respawn* и *teleport to* внизу должны быть понятны без дополнительных пояснений. **Кнопка ** Kick не имеет меню подтверждения, поэтому будьте осторожны с её использованием*.

## Admin Logs

![logs.png](../../assets/images/admin/logs.png)

---

Меню журналов администратора показывает все взаимодействия, произошедшие во время раунда, а также то, какие сущности и игроки в них участвовали. Оно открывается на вкладке *Admin* меню **Admin menu**.

Крайнее левое меню позволяет отфильтровать информацию по типу записи/логе. Второе слева меню позволяет отфильтровать по игрокам/существам, которые были задействованы в записи/логе. 

Левая верхняя кнопка *Round* позволяет выбрать, какой раунд просмотреть, хотя это редко нужно делать, разве что для разборов в ретроспективе.

Вверху можно отфильтровать по *log impact*, хотя это редко требуется, если вы знаете, что ищете.

В правом крайнем меню можно просмотреть фактические данные записи/лога, а также выполнить поиск среди них. Если нужная запись/лог не отображается, попробуйте нажать кнопку *refresh* (скорее всего, это нужно делать при смене игрока или типа записи/лога). Если запись/лог по-прежнему не отображается, нажмите кнопку *Next* и подождите пару секунд.

Кнопка *Pop out* выводит меню журнала в отдельное окно ОС. Полезно для экономии места на основном мониторе.

## Заметки администратора

![notes.png](../../assets/images/admin/notes.png)

---

Заметки администратора дают администраторам возможность хранить информацию о пользователе в тех случаях, когда бан был бы слишком суровым наказанием. Заметки можно редактировать (и показывать информацию о редактировании), а также удалять, если заметка больше не актуальна.

Доступ к заметкам осуществляется через функцию `Admin` или в нижней части меню AHelp.

## Показать переменные (VV)

![vv.png](../../assets/images/admin/vv.png)

---

Прежде чем меню VV станет действительно полезным для вас, необходимо обсудить несколько моментов, связанных с работой SS14:

- Сущность" - это объект в игре - стены, игроки, снаряды, предметы и т.д. Каждой сущности соответствует уникальный `EntityUid` - число `15199`, которое вы видите слева вверху рядом с именем сущности.
- У каждой сущности (как правило) есть ID прототипа, или того, к какому "типу" сущностей она относится. Это строка `MobObserver`, которую вы видите слева вверху.
- У сущностей есть **components**, которые задают определенное поведение сущности. Компонентом для "управляемой игроком" сущности является `ActorComponent`, для оружия - `MeleeWeaponComponent`, для повреждаемых объектов - `DamageableComponent` и т.д. Вы можете динамически добавлять и удалять компоненты, когда захотите.
- Игра разделена на "клиент" и "сервер" с некоторыми общими элементами между ними. Клиент - это то, что работает на вашем компьютере, сервер - то, что работает на игровом сервере.

Чаще всего вы захотите просмотреть список **Server Components**, так как там можно добавлять/удалять/изменять компоненты, и эффект будет заметен на каждом клиенте.


Я рекомендую вам просто попробовать использовать меню VV, чтобы понять, как оно работает. Оно пугает своим масштабом, однако в нём достаточно легко разобраться и оно очень мощное.
### VV Подсказки

- После изменения переменной нажмите `enter`, чтобы сохранить ее значение.
- Некоторые переменные могут выглядеть немодифицируемыми, но дальше по списку может быть их модифицируемая версия.
- `TransformComponent` хранит положение сущности, ее вращение и т.д.
- `Grids` (станция) тоже являются сущностями, и их компоненты могут быть изменены
- Чтобы видеть дальше, можно изменять `zoom` на стороне клиента `EyeComponent`.
- `MindComponent` содержит такую информацию, как роли антагов, задания, цели и т.д.
- 
- Имя/описание сущности может быть изменено с помощью `Server Variables` или на стороне сервера `MetaDataComponent`.
## Консоль

![console.png](../../assets/images/admin/console.png)

---

Консоль можно открыть с помощью клавиши тильда `~`, если вы не назначили иную. Открыть консоль может любой игрок, просто знайте об этом. Команды можно выполнять, набирая команду, а затем аргументы, как в любой оболочке. Важные логи клиента также будут отображаться здесь, так что это полезно для отладки.

Для просмотра списка всех доступных команд используйте команду `list`, а для просмотра инструкций к команде - команду `help <имя команды>`.

### Полезные команды

| Command                                 | Описание                                                                                                                                              | Синтаксис                                        |
|-----------                            |-------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------|
| `aghost`                               | Превращение в призрака-администратора или обратно.                                                                                                    |                                                  |
| `deadmin`                           | Позволяет играть, не получая уведомлений в качестве администратора. Всегда используйте его перед тем, как сами захотите поиграть.                     |                                                  |
| `readmin`                           | Возвращает все функции администратора пользователю после его `deadmin`. Не обязательно запускать при присоединении к серверу.                         |                                                  |
| `help`                                   | Показывает информацию об указанной команде.                                                                                                           | `help <keyword>`                                 |
| `list`                                  | Перечисляет все команды в игре.                                                                                                                       |                                                  |
| `list <keyword>`              | Перечисляет все команды с указанным ключевым словом.                                                                                                  | `list <keyword>`                                 |
| `quit`                                  | Закрывает игру.                                                                                                                                       |                                                  |
| `adminwho`                          | Выдаёт список всех администраторов в сети (не показывает `deadmin`)                                                                                   |                                                  |
| `togglehealthoverlay`   | Включает визуальный слой для здоровья игрока.                                                                                                         | `togglehealthoverlay <true/false>`               |
| `scale`                                  | Делает вещи больше или меньше. Относительно текущего размера (написать 2 дважды - это то же самое, что написать 4 один раз).                          | `scale <uid>`                                    |
| `adduplink`                       | Добавляет апинк к КПК и связывает его с пользователем.                                                                                                | `adduplink <ckey> <pda uid>`                     |
| `lsobjective`                      | Показывает все цели выбранного игрока.                                                                                                                | `lsobjective <ckey>`                             |
| `addobjective`                  | Добавляет цель, требует идентификатор цели.                                                                                                           | `addobjective <ckey> <objectiveID`               |
| `rmobjective`                      | Удаляет цель игрока.                                                                                                                                  | `rmobjective <ckey> <number>`                    |
| `fixgridatmos`                  | Сбрасывает все атмосистемы на решетке на чистые газы, которыми можно дышать.                                                                          | `fixgridatmos <GRID_ID>` (use autofill)          |
| `tpto`                                   | Телепортирует все цели на первый `<ckey/uid>` в команде.                                                                                              | `tpto <ckey/uid> <ckey/uid> <ckey/uid>`          |
| `tp`                                       | Телепортировать себя по координатам на указанной карте.                                                                                               | `tp <X> <Y> <MAPID>`                             |
| `setmind`                           | Помещает душу игрока по идентификатору (может потребоваться, чтобы сущность обладала разумом).                                                        | `setmind <uid> <ckey>`                           |
| `customvote`                       | Создает пользовательское голосование для всех игроков, требующее не менее двух вариантов ответа. Всегда делайте это перед проведением важных событий. | `customvote <title> <option1> <option2> ...`     |
| `addhand`                           | Добавляет руку к сущности, поддерживаются не все сущности, требуется наличие компонента "Hands" в сущности.                                           | `addhand <uid>`                                  |
| `adjstationjob`               | Добавляет или удаляет работу. Полезно в случае ухода одного из членов командования.                                                                   | `adjstationjob <STATION_ID> <job> <amount>`      |
| `addgamerule`                   | Добавляет выбранное игровое событие в игру.                                                                                                           | `addgamerule <gameruleName>`                     |
| `endgamerule`                   | Удаляет выбранный игровое событие из игры. Используется в случае если слишком часто происходит одно и то же событие, не вносящее разнообразие.        | `endgamerule <gameruleName>`                     |
| `rename`                              | Правильный способ переименования человека (включает записи ID, PDA и информацию для клонирования).                                                    | `rename <ckey/uid> <"FIRSTNAME LASTNAME">`       |
| `setadminooc`                   | Изменяет цвет вашего админчата, когда вы администратор.                                                                                               | `setadminooc <HEX Code>`                         |
|`addcomp`                                | Добавляет компонент к сущности.                                                                                                                       | `addcomp <uid> <component name>`                 |
|`banlist`                                | Список всех банов пользователя.                                                                                                                       | `banlist <ckey>`                                 |
|`dock`                                        | Попытка состыковать два стыковочных шлюза.                                                                                                            | `dock <airlock uid 1> <airlock uid 2>`           |
|`forcemap`                                | Выбирает следующую карту для запуска.                                                                                                                 | `forcemap <map prototype id>`                    |
|`forcepreset`                        | Выбирает следующий режим для запуска.                                                                                                                 | `forcepreset <preset prototype id>`              |
|`loadgamemap`                        | Загружает новую игровую карту в заданные координаты по заданному идентификатору карты. Пригодится для импровизированных Ядерных Оперативников.        | `loadgamemap <map prototype id> <mapid> <x> <y>` |
|`vv`                                            | Открыть меню просмотра переменных на сущности. Полезно для редактирования VV в сетках.                                                                                   | `vv <uid>`                                       |


## SS14.Админ

![ss14admin.png](../../assets/images/admin/ss14admin.png)

---

Если вы являетесь официальным администратором Space Wizards :tm: Admin, вы можете получить доступ к онлайн-панели администратора по адресу `central.spacestation14.io/admin`. Войдите в систему, используя свою учетную запись SS14. Сторонние серверы также могут настроить эту панель для себя, используя репозиторий, поэтому эта информация находится здесь и не является секретной.

Наиболее полезной является вкладка *Bans* в верхней части. Здесь отображаются все текущие баны. Вы можете искать по активным или общим банам для любого игрока. **В этом меню отображается PII (персональная идентификационная информация), такая как HWID и IP, поэтому никогда не раскрывайте эту информацию другим*.

Вы можете увидеть время бана, причину и срок его действия. Вы также можете проверить *ban hits*, то есть пытался ли кто-то присоединиться, но ему было отказано по причине бана, а также с каким именем пользователя/IP/HWID он пытался присоединиться. Полезно для обнаружения попыток обойти бан. На этой панели можно также разбанить пользователей.

Вкладка *Players* позволяет искать любого пользователя по имени пользователя, IP, HWID и т.д. **Содержит много PII, будьте осторожны*.

Вкладка *Connections* показывает последние соединения с серверами, а также информацию по каждому из них.

## Админ призрак

Админ призраки - это специальные сущности-наблюдатели, которые принимают имя вашего ckey, имеют руки, могут взаимодействовать с любыми объектами в игре и обладают всеми возможностями. Превратить себя в призрака можно через меню **Admin Menu** или с помощью команды `aghost`.

Вы можете вернуться в свое первоначальное тело

## Деадмин / Реадмин

Если вы хотите просто поиграть в игру, рекомендуется завершить работу администратора командой `deadmin`. Если вы хотите снова выполнять обязанности администратора, используйте команду `readmin`.